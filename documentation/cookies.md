# Cookies

There are various cookies present on production, ownership of cookies varies. Here are the cookies present and some details about them.

## ARRAffinity

This is a cookie controlled by Microsoft Azure. Its purpose is to direct clients to specific instances. 
[Additional information](https://azure.microsoft.com/en-us/blog/disabling-arrs-instance-affinity-in-windows-azure-web-sites/).
May be controlled in Azure settings at `Settings -> Configuration -> General Settings -> Platform Settings`.

## ARRAffinitySameSite

This cookie is also controlled by Microsoft Azure. It is similar in purpose to `ARRAffinity`, but works with a relatively new `SameSite` browser attribute.

## TS(xxxxxxxx)

This cookie is security related and is affiliated with F5 load balancers. Validation of cookies, session expiration, and ASM Frame integrity. 
[Additional information](https://support.f5.com/csp/article/K6850).
F5 provides an Application Security Manager (ASM) which is for security purposes, it controls traffic. This belongs to whoever owns the firewall.
[ASM](https://www.f5.com/pdf/products/big-ip-application-security-manager-overview.pdf)

## ai_user and ai_session

These are [Application Insight](https://learn.microsoft.com/en-gb/azure/azure-monitor/app/configuration-with-applicationinsights-config) cookies belonging to Azure.
`SessionTelemetryInitializer` in Insights draws from the `ai_session` cookies while `UserTelemetryInitializer` works off `ai_user`.

## gc_digital_talent_session

Generated by logging in. 
Owned by the web application for session logic. 

## XRSF-TOKEN

Generated by logging in.
Cross Site Request Forgery token. Possibly generated by Laravel at:
`api\vendor\laravel\framework\src\Illuminate\Foundation\Http\Middleware\VerifyCsrfToken.php`

## long alphanumeric string cookie, 40 character length

Generated by logging in. Randomly generated. 
Example name is `SvV0taJ87xdffy9eFhxMZbeAwTD2ogaKwBcGivZl`.
Decodes into an object with `iv`, `value`, `mac`, and `tag` fields. May originate from Laravel and is a session cookie, would be from:
`api\vendor\laravel\framework\src\Illuminate\Session\Middleware\StartSession.php`

## ak_bmsc and bm_sv

Originates from canada.ca
Akamai cloud and security cookies. 
