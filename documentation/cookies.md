# Cookies

There are various cookies present on production, ownership of cookies varies. Here are the cookies present and some details about them.

## ARRAffinity

### Source: Internal

This is a cookie controlled by Microsoft Azure. Its purpose is to direct clients to specific instances.
May be controlled in Azure settings at `Settings > Configuration > General Settings > Platform Settings`.

- [Additional information](https://azure.microsoft.com/en-us/blog/disabling-arrs-instance-affinity-in-windows-azure-web-sites/).

## ARRAffinitySameSite

### Source: Internal

This cookie is also controlled by Microsoft Azure. It is similar in purpose to `ARRAffinity`, but works with a relatively new `SameSite` browser attribute.

## TS(xxxxxxxx)

### Source: External

This cookie is security related and is affiliated with F5 load balancers. Validation of cookies, session expiration, and ASM Frame integrity.
F5 provides an Application Security Manager (ASM) which is for security purposes, it controls traffic. This belongs to whoever owns the firewall.

- [Additional information](https://support.f5.com/csp/article/K6850).
- [ASM](https://www.f5.com/pdf/products/big-ip-application-security-manager-overview.pdf)

## ai_user and ai_session

### Source: Internal

These are [Application Insight](https://learn.microsoft.com/en-gb/azure/azure-monitor/app/configuration-with-applicationinsights-config) cookies belonging to Azure.
`SessionTelemetryInitializer` in Insights draws from the `ai_session` cookies while `UserTelemetryInitializer` works off `ai_user`.

## gc_digital_talent_session

### Source: Internal

Generated by logging in.
Owned by the web application for session logic.

## XRSF-TOKEN

### Source: Internal

Generated by logging in.
Cross Site Request Forgery token. Possibly generated by Laravel at:
`api\vendor\laravel\framework\src\Illuminate\Foundation\Http\Middleware\VerifyCsrfToken.php`

## _long alphanumeric string_, (40 character length)

### Source: Internal

Generated by logging in. Randomly generated.
Example name is `SvV0taJ87xdffy9eFhxMZbeAwTD2ogaKwBcGivZl`.
Cookie value decodes into an object with further encrypted and encoded `iv`, `value`, `mac`, and `tag` fields. Originates from Laravel and is a session cookie, likely from:
`api\vendor\laravel\framework\src\Illuminate\Session\Middleware\StartSession.php`
It is a very encrypted cookie with multiple layers of encoding.

## ak_bmsc and bm_sv

### Source: External

Originates from canada.ca
Akamai cloud and security cookies.
