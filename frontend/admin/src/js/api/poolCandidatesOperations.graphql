fragment poolCandidateTable on PoolCandidate {
  id,
  pool {
    id,
    name {
      en,
      fr
    },
    classifications {
      id,
      name {
        en,
        fr
      },
      group,
      level
    },
  },
  user {
    id,
    firstName,
    lastName,
    email,
    preferredLang
    telephone
  },
  cmoIdentifier,
  expiryDate,
  isWoman,
  hasDisability,
  isIndigenous,
  isVisibleMinority,
  hasDiploma,
  languageAbility,
  locationPreferences,
  acceptedOperationalRequirements
  expectedSalary,
  expectedClassifications {
    id,
    name {
      en,
      fr
    }
    group,
    level
  }
  cmoAssets {
    id,
    name {
      en,
      fr
    }
  },
  status
}

fragment poolCandidateForm on PoolCandidate {
  id
  pool {
    id
    name {
      en
      fr
    }
  }
  user {
    id
    email
  }
  cmoIdentifier
  expiryDate
  isWoman
  hasDisability
  isIndigenous
  isVisibleMinority
  hasDiploma
  languageAbility
  locationPreferences
  acceptedOperationalRequirements
  expectedSalary
  expectedClassifications {
    id
    group
    level
  }
  cmoAssets {
    id
    key
    name {
      en
      fr
    }
  }
  status
}
query getPoolCandidate($id: ID!) {
  poolCandidate(id: $id) {
    ...poolCandidateTable
  }
}

query GetPoolCandidates {
  poolCandidates {
    ...poolCandidateTable
  }
}

query getPoolCandidatesByPool($id: ID!) {
  pool(id: $id) {
    poolCandidates {
      ...poolCandidateTable
    }
  }
}

query getCreatePoolCandidateData {
  classifications {
    id
    group
    level
  }
  cmoAssets {
    id
    key
    name {
      en
      fr
    }
  }
  pools {
    id
    name {
      en
      fr
    }
  }
  users {
    id
    firstName
    lastName
    email
    preferredLang
    telephone
  }
}

query getUpdatePoolCandidateData($id: ID!) {
  classifications {
    id
    group
    level
  }
  cmoAssets {
    id
    key
    name {
      en
      fr
    }
  }
  pools {
    id
    name {
      en
      fr
    }
  }
  poolCandidate(id: $id) {
    # to allow simultaneous editing of the associated user entity
    user {
      id
      email
      firstName
      lastName
      telephone
      preferredLang
    }
    ...poolCandidateForm
  }
}

mutation createPoolCandidate($poolCandidate: CreatePoolCandidateAsAdminInput!) {
  createPoolCandidateAsAdmin(poolCandidate: $poolCandidate) {
    pool {
      id
    }
    user {
      id
    }
    cmoIdentifier
    expiryDate
    isWoman
    hasDisability
    isIndigenous
    isVisibleMinority
    hasDiploma
    languageAbility
    locationPreferences
    acceptedOperationalRequirements
    expectedSalary
    expectedClassifications {
      id
    }
    cmoAssets {
      id
    }
    status
  }
}

mutation updatePoolCandidate(
  $id: ID!
  $poolCandidate: UpdatePoolCandidateAsAdminInput!
) {
  updatePoolCandidateAsAdmin(id: $id, poolCandidate: $poolCandidate) {
    cmoIdentifier
    expiryDate
    isWoman
    hasDisability
    isIndigenous
    isVisibleMinority
    hasDiploma
    languageAbility
    locationPreferences
    acceptedOperationalRequirements
    expectedSalary
    expectedClassifications {
      id
    }
    cmoAssets {
      id
    }
    status
  }
}
