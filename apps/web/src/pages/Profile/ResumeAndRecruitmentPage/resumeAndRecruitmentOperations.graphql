fragment user on User {
  id
  email
}

fragment experience on Experience {
  id
  details
  user {
    ...user
  }
  skills {
    id
    key
    name {
      en
      fr
    }
    experienceSkillRecord {
      details
    }
  }
  ... on AwardExperience {
    title
    issuedBy
    awardedDate
    awardedTo
    awardedScope
  }
  ... on CommunityExperience {
    title
    organization
    project
    startDate
    endDate
  }
  ... on EducationExperience {
    institution
    areaOfStudy
    thesisTitle
    startDate
    endDate
    type
    status
  }
  ... on PersonalExperience {
    title
    description
    startDate
    endDate
  }
  ... on WorkExperience {
    role
    organization
    division
    startDate
    endDate
  }
}

fragment applicantExperiences on User {
  id
  experiences {
    ...experience
  }
}

fragment poolSkills on Skill {
  id
  key
  name {
    en
    fr
  }
  description {
    en
    fr
  }
  families {
    id
    key
    description {
      en
      fr
    }
    name {
      en
      fr
    }
    category
  }
}

fragment application on PoolCandidate {
  id
  status
  archivedAt
  submittedAt
  suspendedAt
  pool {
    id
    closingDate
    name {
      en
      fr
    }
    publishingGroup
    stream
    classifications {
      id
      group
      level
      name {
        en
        fr
      }
      genericJobTitles {
        id
        key
        name {
          en
          fr
        }
      }
      minSalary
      maxSalary
    }
  }
}

query getAllApplicantExperiences($id: UUID!) {
  applicant(id: $id) {
    ...applicantExperiences
    poolCandidates {
      ...application
    }
  }
}

query getAllApplicantExperiencesAndPoolSkills(
  $applicantId: UUID!
  $poolId: UUID!
) {
  applicant(id: $applicantId) {
    ...applicantExperiences
  }
  pool(id: $poolId) {
    essentialSkills {
      ...poolSkills
    }
    nonessentialSkills {
      ...poolSkills
    }
  }
}

query GetApplicationDetails($id: UUID!) {
  poolCandidate(id: $id) {
    pool {
      id
      name {
        en
        fr
      }
      stream
      classifications {
        id
        group
        level
        name {
          en
          fr
        }
        genericJobTitles {
          id
          key
          name {
            en
            fr
          }
        }
      }
      essentialSkills {
        ...poolSkills
      }
      nonessentialSkills {
        ...poolSkills
      }
    }
  }
}
