query GetProfileFormOptions {
  departments {
    id
    departmentNumber
    name {
      en
      fr
    }
  }
  classifications {
    id
    name {
      en
      fr
    }
    group
    level
    minSalary
    maxSalary
  }
}

fragment experienceFragment on Experience {
  id
  __typename
  user {
    id
    email
  }
  details
  skills {
    id
    key
    name {
      en
      fr
    }
    description {
      en
      fr
    }
    keywords {
      en
      fr
    }
    experienceSkillRecord {
      details
    }
  }
  ... on AwardExperience {
    title
    issuedBy
    awardedDate
    awardedTo
    awardedScope
  }
  ... on CommunityExperience {
    title
    organization
    project
    startDate
    endDate
  }
  ... on EducationExperience {
    institution
    areaOfStudy
    thesisTitle
    startDate
    endDate
    type
    status
  }
  ... on PersonalExperience {
    title
    description
    startDate
    endDate
  }
  ... on WorkExperience {
    role
    organization
    division
    startDate
    endDate
  }
}

query GetApplication($id: UUID!) {
  poolCandidate(id: $id) {
    id
    user {
      id
      firstName
      lastName
      email
      telephone
      preferredLang
      preferredLanguageForInterview
      preferredLanguageForExam
      currentProvince
      currentCity
      citizenship
      languageAbility
      lookingForEnglish
      lookingForFrench
      lookingForBilingual
      bilingualEvaluation
      comprehensionLevel
      writtenLevel
      verbalLevel
      estimatedLanguageAbility
      isGovEmployee
      govEmployeeType
      armedForcesStatus
      hasPriorityEntitlement
      priorityNumber
      isProfileComplete
      department {
        id
        departmentNumber
        name {
          en
          fr
        }
      }
      currentClassification {
        id
        group
        level
        name {
          en
          fr
        }
      }
      isWoman
      hasDisability
      isIndigenous
      indigenousCommunities
      indigenousDeclarationSignature
      isVisibleMinority
      hasDiploma
      locationPreferences
      locationExemptions
      acceptedOperationalRequirements
      positionDuration
      experiences {
        id
        __typename
        user {
          id
          email
        }
        details
        skills {
          id
          key
          name {
            en
            fr
          }
          description {
            en
            fr
          }
          keywords {
            en
            fr
          }
          experienceSkillRecord {
            details
          }
        }
        ...experienceSubTypes
      }
    }
    pool {
      id
      name {
        en
        fr
      }
      stream
      closingDate
      publishingGroup
      language
      classifications {
        id
        group
        level
        name {
          en
          fr
        }
        genericJobTitles {
          id
          key
          name {
            en
            fr
          }
        }
      }
      essentialSkills {
        ...poolSkills
      }
      nonessentialSkills {
        ...poolSkills
      }
      screeningQuestions {
        id
        question {
          en
          fr
        }
      }
    }
    educationRequirementOption
    educationRequirementExperiences {
      ...experienceFragment
    }
    submittedSteps
    screeningQuestionResponses {
      id
      answer
      screeningQuestion {
        id
        question {
          en
          fr
        }
      }
    }
    signature
  }
}

fragment poolSkills on Skill {
  id
  key
  name {
    en
    fr
  }
  description {
    en
    fr
  }
  families {
    id
    key
    description {
      en
      fr
    }
    name {
      en
      fr
    }
    category
  }
}

mutation UpdateApplication($id: ID!, $application: UpdateApplicationInput!) {
  updateApplication(id: $id, application: $application) {
    id
  }
}

mutation SubmitApplication($id: ID!, $signature: String!) {
  submitApplication(id: $id, signature: $signature) {
    id
    signature
  }
}

mutation UpdateUserAndApplication(
  $userId: ID!
  $userInput: UpdateUserAsUserInput!
  $applicationId: ID!
  $applicationInput: UpdateApplicationInput!
) {
  updateUserAsUser(id: $userId, user: $userInput) {
    id
    indigenousCommunities
    indigenousDeclarationSignature
  }
  updateApplication(id: $applicationId, application: $applicationInput) {
    id
  }
}

fragment experienceSubTypes on Experience {
  ... on AwardExperience {
    title
    issuedBy
    awardedDate
    awardedTo
    awardedScope
    details
  }
  ... on CommunityExperience {
    title
    organization
    project
    startDate
    endDate
    details
  }
  ... on EducationExperience {
    institution
    areaOfStudy
    thesisTitle
    startDate
    endDate
    type
    status
    details
  }
  ... on PersonalExperience {
    title
    description
    startDate
    endDate
    details
  }
  ... on WorkExperience {
    role
    organization
    division
    startDate
    endDate
    details
  }
}
