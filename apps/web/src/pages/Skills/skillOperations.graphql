fragment skillFragment on Skill {
  id
  key
  category
  name {
    en
    fr
  }
  description {
    en
    fr
  }
  keywords {
    en
    fr
  }
  families {
    id
    key
    name {
      en
      fr
    }
    description {
      en
      fr
    }
  }
}

fragment skillShowcaseFragment on UserSkill {
  id
  skillLevel
  topSkillsRank
  improveSkillsRank
  user {
    id
  }
  skill {
    id
    key
    category
    name {
      en
      fr
    }
    description {
      en
      fr
    }
  }
}

fragment userSkillExperienceFragment on Experience {
  id
  __typename
  details
  user {
    id
  }
  ... on AwardExperience {
    title
    issuedBy
    awardedDate
    awardedTo
    awardedScope
  }
  ... on CommunityExperience {
    title
    organization
    project
    startDate
    endDate
  }
  ... on EducationExperience {
    institution
    areaOfStudy
    thesisTitle
    startDate
    endDate
    type
    status
  }
  ... on PersonalExperience {
    title
    description
    startDate
    endDate
  }
  ... on WorkExperience {
    role
    organization
    division
    startDate
    endDate
  }
}

query AllSkills {
  skills {
    ...skillFragment
  }
}

query Skill($id: UUID!) {
  skill(id: $id) {
    ...skillFragment
  }
}

query GetUpdateSkillData($id: UUID!) {
  skillFamilies {
    id
    key
    name {
      en
      fr
    }
    description {
      en
      fr
    }
  }

  skill(id: $id) {
    id
    key
    name {
      en
      fr
    }
    description {
      en
      fr
    }
    keywords {
      en
      fr
    }
    category
    families {
      id
      key
      name {
        en
        fr
      }
      description {
        en
        fr
      }
    }
  }
}

query UserSkill($skillId: UUID!) {
  me {
    id
    userSkills(includeSkillIds: [$skillId]) {
      id
      whenSkillUsed
      skillLevel
      topSkillsRank
      improveSkillsRank
      user {
        id
      }
      skill {
        id
        key
        category
        name {
          en
          fr
        }
      }
      experiences {
        ...userSkillExperienceFragment
        skills {
          id
          key
          category
          name {
            en
            fr
          }
          experienceSkillRecord {
            details
          }
        }
      }
    }
    experiences {
      id
      ...userSkillExperienceFragment
    }
  }
  skill(id: $skillId) {
    ...skillFragment
  }
}

query UserSkillShowcase {
  me {
    id
    topTechnicalSkillsRanking {
      ...skillShowcaseFragment
    }
    topBehaviouralSkillsRanking {
      ...skillShowcaseFragment
    }
    improveTechnicalSkillsRanking {
      ...skillShowcaseFragment
    }
    improveBehaviouralSkillsRanking {
      ...skillShowcaseFragment
    }
  }
}

query UserSkills {
  me {
    id
    userSkills {
      id
      whenSkillUsed
      skillLevel
      topSkillsRank
      improveSkillsRank
      user {
        id
      }
      skill {
        id
        key
        category
        name {
          en
          fr
        }
      }
      experiences {
        id
        user {
          id
        }
      }
    }
  }
  skills {
    ...skillFragment
  }
}

mutation UpdateSkill($id: ID!, $skill: UpdateSkillInput!) {
  updateSkill(id: $id, skill: $skill) {
    name {
      en
      fr
    }
    description {
      en
      fr
    }
    keywords {
      en
      fr
    }
  }
}

mutation CreateSkill($skill: CreateSkillInput!) {
  createSkill(skill: $skill) {
    key
    name {
      en
      fr
    }
    description {
      en
      fr
    }
    keywords {
      en
      fr
    }
  }
}

mutation CreateUserSkill(
  $userId: UUID!
  $skillId: UUID!
  $userSkill: CreateUserSkillInput
) {
  createUserSkill(userId: $userId, skillId: $skillId, userSkill: $userSkill) {
    id
    skillLevel
    skill {
      id
      category
      name {
        en
        fr
      }
      description {
        en
        fr
      }
    }
  }
}

mutation UpdateUserSkill($id: UUID!, $userSkill: UpdateUserSkillInput) {
  updateUserSkill(id: $id, userSkill: $userSkill) {
    id
    skillLevel
    skill {
      id
      category
      name {
        en
        fr
      }
      description {
        en
        fr
      }
    }
  }
}

mutation DeleteUserSkill($id: UUID!) {
  deleteUserSkill(id: $id) {
    id
  }
}

mutation updateUserSkillRankings(
  $userId: UUID!
  $userSkillRanking: UpdateUserSkillRankingsInput!
) {
  updateUserSkillRankings(
    userId: $userId
    userSkillRanking: $userSkillRanking
  ) {
    id
    topTechnicalSkillsRanking {
      id
      topSkillsRank
    }
    topBehaviouralSkillsRanking {
      id
      topSkillsRank
    }
    improveTechnicalSkillsRanking {
      id
      improveSkillsRank
    }
    improveBehaviouralSkillsRanking {
      id
      improveSkillsRank
    }
  }
}
