# query to populate the assessment plan builder page
query getAssessmentPlanBuilderData($poolId: UUID!) {
  # the existing data of the pool to edit
  pool(id: $poolId) {
    id
    name {
      en
      fr
    }
    publishedAt
    poolSkills {
      id
      type
      skill {
        name {
          en
          fr
        }
        # three junk fields required by schema since non-nullable
        id
        category
        key
      }
    }
    assessmentSteps {
      id
      sortOrder
      type
      title {
        en
        fr
      }
      poolSkills {
        id
        type
        skill {
          name {
            en
            fr
          }
          # three junk fields required by schema since non-nullable
          id
          category
          key
        }
      }
    }
    status
    screeningQuestions {
      id
      question {
        en
        fr
      }
      sortOrder
    }
  }
}

# update an existing assessment step
mutation updateAssessmentStep(
  $id: UUID!
  $assessmentStep: AssessmentStepInput
) {
  updateAssessmentStep(id: $id, assessmentStep: $assessmentStep) {
    id
  }
}

# create a new assessment step
mutation createAssessmentStep(
  $poolId: UUID!
  $assessmentStep: AssessmentStepInput
) {
  createAssessmentStep(poolId: $poolId, assessmentStep: $assessmentStep) {
    id
  }
}

# delete an existing assessment step
mutation deleteAssessmentStep($id: UUID!) {
  deleteAssessmentStep(id: $id) {
    id
  }
}
