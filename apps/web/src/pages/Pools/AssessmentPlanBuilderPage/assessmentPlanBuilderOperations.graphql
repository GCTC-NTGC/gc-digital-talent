# query to populate the assessment plan builder page
query getAssessmentPlanBuilderData($poolId: UUID!) {
  # the existing data of the pool to edit
  pool(id: $poolId) {
    id
    name {
      en
      fr
    }
    publishedAt
    poolSkills {
      id
      type
      skill {
        name {
          en
          fr
        }
        # three junk fields required by schema since non-nullable
        id
        category
        key
      }
    }
    assessmentSteps {
      id
      sortOrder
      type
      title {
        en
        fr
      }
      poolSkills {
        id
        type
        skill {
          name {
            en
            fr
          }
          # three junk fields required by schema since non-nullable
          id
          category
          key
        }
      }
    }
    status
    generalQuestions {
      id
      question {
        en
        fr
      }
      sortOrder
    }
    team {
      id
      name
    }
  }
}

# swap existing assessment steps
mutation swapAssessmentStepOrder($stepIdA: UUID!, $stepIdB: UUID!) {
  swapAssessmentStepOrder(stepIdA: $stepIdA, stepIdB: $stepIdB) {
    id
  }
}

# update an existing assessment step
mutation updateAssessmentStep(
  $id: UUID!
  $assessmentStep: AssessmentStepInput
) {
  updateAssessmentStep(id: $id, assessmentStep: $assessmentStep) {
    id
  }
}

# create a new regular assessment step
mutation createAssessmentStep(
  $poolId: UUID!
  $assessmentStep: AssessmentStepInput
) {
  createAssessmentStep(poolId: $poolId, assessmentStep: $assessmentStep) {
    id
  }
}

# create a new general question assessment step
mutation createOrUpdateGeneralQuestionAssessmentStep(
  $poolId: UUID!
  $generalQuestions: [SyncGeneralQuestionsInput]
  $assessmentStep: GeneralQuestionAssessmentStepInput
) {
  createOrUpdateGeneralQuestionAssessmentStep(
    poolId: $poolId
    generalQuestions: $generalQuestions
    assessmentStep: $assessmentStep
  ) {
    id
  }
}

# delete an existing assessment step
mutation deleteAssessmentStep($id: UUID!) {
  deleteAssessmentStep(id: $id) {
    id
  }
}
